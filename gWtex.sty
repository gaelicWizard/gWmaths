\ProvidesExplPackage{gWtex}{2020/01/09}{0.2}{Utility macros for gWmaths}
\NeedsTeXFormat{LaTeX2e}[2018/03/24]% \LaTeX3 is now an in-box upgrade to \LaTeXe
\RequirePackage{etoolbox}% \eTeX is already long ago required by \LaTeX2e
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Define \GetFileInfo %%% Copy/pasta directly from `doc` package
\def\GetFileInfo#1{%
  \edef\filename{#1}%
  \def\@tempb##1 ##2 ##3\relax##4\relax{%
    \def\filedate{##1}%
    \def\fileversion{##2}%
    \def\fileinfo{##3}}%
  \edef\@tempa{\csname ver@#1\endcsname}%
  \expandafter\@tempb\@tempa\relax? ? \relax\relax}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% current file / job name / expansion shenanigans
%\cs_generate_variant:Nn \tl_set_rescan:Nnn { NnV }
%\ProvideDocumentCommand{\definenormaljobname}{O{\normaljobname}}
%{
%	\tl_set_rescan:NnV #1 { } \c_sys_jobname_str
%}
% https://tex.stackexchange.com/a/117895

%\GetFileInfo{\CurrentFile}


% '\the' expands a "token variable", whatever that is... something \newdimen

\newtoks\gWtoks
\edef\test{\CurrentFile}
\gWtoks\expandafter{\test}% \gWtoks holds 'stuff' as letters
%y\detokenize\expandafter{\filename}y% Ouputs 'stuff' as 'other' tokens

%\GetFileInfo{\gWtoks}



\def\omgjob#1{\detokenize\expandafter{#1}}
%\def\omgjobname




\xdef\omgfile{\filename}%{\{\value{\CurrentFile}}
\xdef\omgversion{\fileversion}
\xdef\omgdate{\filedate}
\xdef\omginfo{\fileinfo}

\edef\omgcurr{\expanded{\CurrentFile}}
\edef\omgname{\detokenize\expandafter{\omgcurr}}




%http://www.texfaq.org/FAQ-compjobnam
\def\jobis#1{FF\fi
  \edef\predicate{#1}%
  \edef\predicate{\expandafter\strip@prefix\meaning\predicate}%
  \edef\job{\jobname}%
  \ifx\job\predicate
}





%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Define functions to get lists of classes, packages, files loaded % https://tex.stackexchange.com/a/43568
\seq_new:N \l_pclist_classes_seq
\seq_new:N \l_pclist_packages_seq
\seq_new:N \l_pclist_other_seq
\clist_map_inline:cn { @filelist }
  {
   \tl_if_in:nnTF { #1 } { .cls }
     {
      \tl_set:Nn \l_tmpa_tl { #1 }
      \tl_remove_once:Nn \l_tmpa_tl { .cls }
      \seq_put_right:NV \l_pclist_classes_seq \l_tmpa_tl
     }
     {
      \tl_if_in:nnTF { #1 } { .sty }
       {
        \tl_set:Nn \l_tmpa_tl { #1 }
        \tl_remove_once:Nn \l_tmpa_tl { .sty }
        \seq_put_right:NV \l_pclist_packages_seq \l_tmpa_tl
       }
       {
        \seq_put_right:Nn \l_pclist_other_seq { #1 }
       }
     }
  }

\ProvideDocumentCommand\ifClassLoaded{m}
{
	\seq_if_in:NnTF \l_pclist_classes_seq { #1 }
		{ \msg_term:x { The~class~`#1'~is~loaded } }
		{ \msg_term:x { The~class~`#1'~is~NOT~loaded } }
}

\ProvideDocumentCommand\showclassesloaded{}{\seq_show:N \l_pclist_classes_seq}
\ProvideDocumentCommand\showpackagesloaded{}{\seq_show:N \l_pclist_packages_seq}
\ProvideDocumentCommand\showfilesloaded{}{\seq_show:N \l_pclist_other_seq}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Define \ifLaTeX3
\ProvideDocumentCommand\ifLaTeXx{}
{
	\ifcsdef{ExplSyntaxOn}{true}{false}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\AtEndPreamble
{
	\makeatletter
	\let\globalClassOptions\@classoptionslist
	\makeatother
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Define logos for the \TeX family
\ProvideDocumentCommand\TeX{}	{\hologo{TeX}\xspace}
\ProvideDocumentCommand\eTeX{}	{\hologo{eTeX}\xspace}
\ProvideDocumentCommand\XeTeX{}	{\hologo{XeTeX}\xspace}
\ProvideDocumentCommand\pdfTeX{}	{\hologo{pdfTeX}\xspace}
\ProvideDocumentCommand\LuaTeX{}	{\hologo{LuaTeX}\xspace}
\ProvideDocumentCommand\LaTeX{}	{\hologo{LaTeX}\xspace}
\ProvideDocumentCommand\LaTeXe{}	{\hologo{LaTeX2e}\xspace}
\ProvideDocumentCommand\LaTeXx{}	{\hologo{LaTeX3}\xspace}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%\primitive\jobname



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Notes
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\keys_define:nn { gWmaths / gWexample }
{
%	gWsomeMultipleChoice	= .choice:	,
%	gWsomeMultipleChoice / gWsomeKeyOptionaA	.bool_set:N	= \gW@someMultipleChoiceKeyOptionA		,
%	gWsomeMultipleChoice / gWsomeKeyOptionaB	.code:n	= {dome complicated shit}	,
%	gWsomeMultipleChoice	.value_required	,

	gWsomeBooleanFlag	.bool_set:N	=	\l_gW_someFlag	,
	gWsomeBooleanFlag	.default:n		=	true	,

	gWsomeMiscArgument	.code:n = {curly-braces are actually optional, but that's dumb.}	,
%	gWsomeMiscArgument	.value_forbidden:	,

%	gWuseBaseClass	.choice_code:n	= {
%		Do something using either
%		\l_keys_choice_tl or
%		\l_keys_choice_int.
		%The name of the current choice (for example choice-b) is assigned to \l_keys_choice_tl, its numeric position in the list (for example 1 for choice-b) is assigned to \l_keys_choice_int. Notice that this is indexed from 0!
%			}	,

%	gWuseBaseClass	.generate_choices:n	=	{
%		article, % Choice 0
%		report, % Choice 1
%		beamer, % Choice 2
%			}	,

	gWuseHyperDoc	.code:n	= Something with #1 ,
	gWuseAMSmath	.code:n	= Other thing #1 ,
	gWhyperTeX	.meta:n	=	{
		gWuseHyperDoc	= #1 ,
		gWuseAMSmath = #1 ,
			}	,

	gWsomeDIMvalue .dim_set:N = \l_gW_gWsomeDIMvalue	,
	gWsomeInteger .int_set:N = \l_gW_maxCounter	,
	gWwtfIsSkipType .skip_set:N = \l_gW_skip_yourself	,
	gWtehTokenList .tl_set:N = \l_gW_block_of_text_or_code_or_whatever	,

	unknown	.code:n	=	{%'unknown' is hardcoded the "default case"
		\msg_error:nnx { gWmaths }
		{ unknown-key } { \l_keys_key_tl }
			}
}



%\RequirePackage{l3bootstrap}
%\GetIdInfo $Id$ %
%\ProvidesExplPackage{\ExplFileName}
%	{\ExplFileDate}{\ExplFileVersion}{\ExplFileDescription}


%\iftutex
%\usepackage{fontspec}
%\setmainfont{TeX Gyre Termes}
%\usepackage{unicode-math}
%\setmathfont{Stix Two Math}
%\else
%\usepackage{newtxtext,newtxmath}
%\fi



%\ReplaceClass{article}{report}%https://tex.stackexchange.com/a/150388



%2018: Full support for Unicode input; UTF-8 became the default encoding in LaTeX;
%2019: Introduction of the LaTeX development formats to allow people to try out upcoming releases with ease;
%2020: Integration of the L3 programming layer into the LaTeX format




%%
% axessibility
%\tagpdfsetup{tabsorder=structure, uncompress, activate-all, interwordspace=true}
%\tagpdfifpdftexT
%{
%	\pdfcatalog{/Lang (en-US)}
%	\usepackage[T1]{fontenc}
%	\input glyphtounicode
%	\pdfgentounicode=1
%}
%\tagpdfifluatexT
%{
%	\pdfextension catalog{/Lang (en-US)}
%	\RequirePackage{fontspec}
%	\RequirePackage{luacode}
%	\newfontface\zerowidthfont{freeserif}
%	\directlua{
%		require(”axessibility.lua”)
%	}
%}
%%
% redefines {equation} environment, and redefines all the align/gather/multiline formula environments from `amsmath`
%http://ctan.math.washington.edu/tex-archive/macros/latex/contrib/axessibility/axessibility.pdf




%
%\ClassError{class-name}{error-text}{help-text}. Takes three parameters, each one inside braces: the class name, the error text which is going to be displayed (the compilation process will be paused), and the help text that will be printed if the user press "h" when the compilation pauses because of the error.
%\ClassWarning{class-name}{warning-text}. In this case the text is displayed but the compilation process won't stop. It will show the line number where the warning occurred.
%\ClassWarningNoLine{class-name}{warning-text}. Works just like the previous command, but it won't show the line where the warning occurred.
%\ClassInfo{class name}{info-text}. In this case the information in the second parameter will only be printed in the transcript file, including the line number.




%% \XeTeX w/ `fontspec`
%\setromanfont{Times New Roman}
%\setsansfont{Arial}
%\setmonofont[Color={0019D4}]{Courier New}



%https://www.overleaf.com/learn/latex/Inserting_Images
%https://www.overleaf.com/learn/latex/Positioning_images_and_tables

%`graphics`/`graphicx`

%\DeclareGraphicsExtensions{.png,.pdf} % prefer .png first, then .pdf second
% Assuming that .pdf is higher res than .png, switching their order jumps from draft to final, for example.
%\DeclareGraphicsExtensions{.pdf,.png}

%\graphicspath{ {images/} } % relative to the current file % trailing slash required
%\graphicspath{ {./images/} } % relative to the main TeX job file % trailing slash required
%\graphicspath{ {./images1/}{./images2/} } % multiple maths
%\graphicspath{ {images/}{./images} } % search relative to current file, then relative to job file...
%\includegraphics[scale=1.5]{lion-logo}
%\includegraphics[width=3cm, height=4cm]{lion-logo}
%\includegraphics[width=\textwidth]{universe} % \columnsep, \linewidth, \textheight, \paperheight, etc.
%\includegraphics[scale=1.2, angle=45]{lion-logo} % 45 degrees counter-clockwise

% 'figure' environment "floats" the content
%\begin{figure}[h] % 'h' means "here"
%	\includegraphics[width=8cm]{Plot}
%\end{figure}

%h	Place the float here, i.e., approximately at the same point it occurs in the source text (however, not exactly at the spot)
%t	Position at the top of the page.
%b	Position at the bottom of the page.
%p	Put on a special page for floats only.
%!	Override internal parameters LaTeX uses for determining "good" float positions.
%H	Places the float at precisely the location in the LATEX code. Requires the float package, though may cause problems occasionally. This is somewhat equivalent to h!.

%The additional command \centering will centre the picture. The default alignment is left.

% adding `wrapfig` allows: 
%\begin{wrapfigure}{r}{0.25\textwidth} %this figure will be at the right
%	\centering
%	\includegraphics[width=0.25\textwidth]{mesh} % '0.25\textwidth' means 25% the width of the text block
%\end{wrapfigure}

%\begin{figure}[h]
%	\centering
%	\includegraphics[width=0.25\textwidth]{mesh}
%	\caption{a nice plot}
%	\label{fig:mesh1}
%\end{figure}
%
%As you can see in the figure \ref{fig:mesh1}, the function grows near 0. Also, in the page \pageref{fig:mesh1} is the same example.

% `sidecap` environment 'SCfigure' allows to put the caption to the left or right, pkg opt 'rightcaption'

%pt	A point, is the default length unit. About 0.3515mm
%mm	a millimetre
%cm	a centimetre
%in	an inch
%ex	the height of an x in the current font
%em	the width of an m in the current font
%\columnsep	distance between columns
%\columnwidth	width of the column
%\linewidth	width of the line in the current environment
%\paperwidth	width of the page
%\paperheight	height of the page
%\textwidth	width of the text
%\textheight	height of the text
%\unitlength	units of length in the picture environment.

%pdftex: jpeg, png, pdf, eps

% `subcaption` package allows, but not with `beamer`
%\begin{figure}[h]
%\begin{subfigure}{0.5\textwidth}
%\includegraphics[width=0.9\linewidth, height=5cm]{lion-logo} 
%\caption{Caption1}
%\label{fig:subim1}
%\end{subfigure}
%\begin{subfigure}{0.5\textwidth}
%\includegraphics[width=0.9\linewidth, height=5cm]{mesh}
%\caption{Caption 2}
%\label{fig:subim2}
%\end{subfigure}
%\caption{Caption for this figure with two images}
%\label{fig:image2}
%\end{figure}

% required-but-not-base package `array` updates the pre-1988 table environments to..post-1988...
% environment 'tabular' vs 'table'
% environment 'wraptable' from `wrapfig`, same like 'wrapfigure'

%\href{run:./file.txt}{File.txt} or \url{run:./file.txt}

%\hypertarget{thesentence}{this sentence} % better than \label...?

%hyperindex	true	Makes the page numbers of index entries into hyperlinks
%linktocpage	false	Makes the page numbers instead of the text to be link in the Table of contents.
%breaklinks	false	Allows links to be broken into multiple lines.
%colorlinks	false	Colours the text for links and anchors, these colours will appear in the printed version
%linkcolor	red	Colour for normal internal links
%anchorcolor	black	Colour for anchor (target) text
%citecolor	green	Colour for bibliographical citations
%filecolor	cyan	Colour for links that open local files
%urlcolor	magenta	Colour for linked URLs
%frenchlinks	false	Use small caps instead of colours for links

% `kvoptions-patch` patches \LaTeX to be less dumb about key=value package options...but...wat?

% `hyperref` option 'hyperfigures' what is?


%anchorcolor	color	black	Color for anchor text. Ignored by most drivers.
%citecolor	color	green	Color for bibliographical citations in text.
%filecolor	color	cyan	Color for URLs which open local files.
%menucolor	color	red	Color for Acrobat menu items.
%runcolor	color	filecolor	Color for run links (launch annotations).
%urlcolor	color	magenta	Color for linked URLs
